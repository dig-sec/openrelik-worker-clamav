# Utgard Lab Configuration
# Copy this file and adjust for your deployment environment (local, Azure, etc.)

#------------------------------------------------------------------------------
# Network Configuration
#------------------------------------------------------------------------------
lab:
  # Internal lab network (isolated subnet for VMs)
  network: "10.20.0.0/24"
  netmask: "255.255.255.0"
  
  # VM IP addresses on the lab network
  firewall_ip: "10.20.0.2"
  openrelik_ip: "10.20.0.30"
  remnux_ip: "10.20.0.20"
  neko_ip: "10.20.0.40"

host:
  # Network CIDR for the hypervisor/host network (vagrant-libvirt default)
  # Azure: adjust to your VNet subnet CIDR
  network_cidr: "192.168.121.0/24"

#------------------------------------------------------------------------------
# Service Ports (on their respective VMs)
#------------------------------------------------------------------------------
service_ports:
  openrelik_ui: 8711
  openrelik_api: 8710
  neko_tor: 8080
  neko_chromium: 8090

#------------------------------------------------------------------------------
# Feature Flags
#------------------------------------------------------------------------------
features:
  # Guacamole removed - using Pangolin for remote access
  # enable_guacamole: false
  
  # Enable extra OpenRelik workers (ClamAV, YARA, etc.)
  enable_extra_workers: false
  
  # Run OpenRelik database migrations on provision
  openrelik_run_migrations: true

#------------------------------------------------------------------------------
# Pangolin Access Layer
#------------------------------------------------------------------------------
pangolin:
  enabled: true
  domain: "utgard.dig-sec.com"
  # Bind IP left empty to default to the firewall's primary address
  bind_ip: ""
  acme_email: "admin@utgard.dig-sec.com"
  secret: "utgard-lab-secret-key-change-me-in-production"
  install_dir: "/opt/pangolin"

#------------------------------------------------------------------------------
# Credentials (override via environment variables in production)
#------------------------------------------------------------------------------
credentials:
  # Neko browser passwords
  neko_password: "neko"
  neko_admin_password: "admin"
  
  # OpenRelik OAuth (leave empty to use env vars)
  openrelik_client_id: ""
  openrelik_client_secret: ""
  openrelik_allowlist: []
  
  # GitHub Container Registry (for private images)
  ghcr_username: ""
  ghcr_token: ""

#------------------------------------------------------------------------------
# VM Resources
#------------------------------------------------------------------------------
resources:
  firewall:
    memory: 2048
    cpus: 2
  openrelik:
    memory: 4096
    cpus: 2
  remnux:
    memory: 4096
    cpus: 2
  neko:
    memory: 3072
    cpus: 2

#------------------------------------------------------------------------------
# Azure-specific Configuration (uncomment and adjust for Azure deployment)
#------------------------------------------------------------------------------
# azure:
#   resource_group: "utgard-rg"
#   location: "westeurope"
#   vnet_name: "utgard-vnet"
#   subnet_name: "utgard-subnet"
#   nsg_name: "utgard-nsg"
#   public_ip_name: "utgard-pip"
